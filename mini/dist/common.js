(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[2],{10:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return h}));var r,a=n(17);function i(e){return void 0!==e&&null!==e}function c(e){var t=Object(a["a"])(e);return null!==e&&("object"===t||"function"===t)}function o(e){return/^\d+(\.\d+)?$/.test(e)}function s(e){setTimeout((function(){e()}),1e3/30)}function u(){return null==r&&(r=wx.getSystemInfoSync()),r}function l(e){if(i(e))return e=String(e),o(e)?"".concat(e,"px"):e}function d(e){var t=u();return"devtools"===t.platform?s(e):wx.createSelectorQuery().selectViewport().boundingClientRect().exec((function(){e()}))}function f(e){var t=this;return new Promise((function(n){wx.createSelectorQuery().in(t).select(e).boundingClientRect().exec((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(e[0])}))}))}function h(e){var t=this;return new Promise((function(n){wx.createSelectorQuery().in(t).selectAll(e).boundingClientRect().exec((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(e[0])}))}))}},126:function(e,t,n){},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(0),a=n(2),i=n.n(a),c=n(24),o=n(1),s=n(74),u=n.n(s),l=Object(c["a"])(o["f"])({name:"StatusBar",class:"s1c06q3b",vars:{"s1c06q3b-0":[function(e){return e.height},"px"]}}),d=Object(c["a"])(o["f"])({name:"NavBar",class:"n1as25y5",vars:{"n1as25y5-0":[function(e){return e.height},"px"]}}),f=Object(c["a"])(o["a"])({name:"Logo",class:"l196jajf"}),h=Object(c["a"])(o["e"])({name:"Title",class:"th9r5lt"}),p=Object(c["a"])(o["f"])({name:"BackBtn",class:"b1w2mns"}),v=Object(c["a"])(o["f"])({name:"Contanter",class:"ckp3wr5"});function g(e){var t=i.a.getSystemInfoSync(),n=t.statusBarHeight,a=e.back,c=e.style,o=e.title,s=function(){return r["createElement"]("van-sticky",{offsetTop:n+8},r["createElement"](p,{onClick:function(){i.a.navigateBack()}},r["createElement"]("van-button",{customStyle:"min-width:30px;",icon:"arrow-left",type:"default",size:"small"})))};return r["createElement"](v,{style:c},r["createElement"](l,{height:n}),r["createElement"](d,{height:44},!a&&!o&&r["createElement"](f,{mode:"heightFix",src:u.a}),a&&!o&&s(),a&&o&&r["createElement"](p,{onClick:function(){i.a.navigateBack()}},r["createElement"]("van-icon",{name:"arrow-left",size:"24PX"})),o&&r["createElement"](h,null,o)))}n(126)},27:function(e,t,n){"use strict";var r=n(10),a={type:"text",mask:!1,message:"",show:!0,zIndex:1e3,duration:2e3,position:"middle",forbidClick:!1,loadingType:"circular",selector:"#van-toast"},i=[],c=Object.assign({},a);function o(e){return Object(r["f"])(e)?e:{message:e}}function s(){var e=getCurrentPages();return e[e.length-1]}function u(e){var t=Object.assign(Object.assign({},c),o(e)),n=t.context||s(),r=n.selectComponent(t.selector);if(r)return delete t.context,delete t.selector,r.clear=function(){r.setData({show:!1}),t.onClose&&t.onClose()},i.push(r),r.setData(t),clearTimeout(r.timer),t.duration>0&&(r.timer=setTimeout((function(){r.clear(),i=i.filter((function(e){return e!==r}))}),t.duration)),r;console.warn("\u672a\u627e\u5230 van-toast \u8282\u70b9\uff0c\u8bf7\u786e\u8ba4 selector \u53ca context \u662f\u5426\u6b63\u786e")}var l=function(e){return function(t){return u(Object.assign({type:e},o(t)))}};u.loading=l("loading"),u.success=l("success"),u.fail=l("fail"),u.clear=function(){i.forEach((function(e){e.clear()})),i=[]},u.setDefaultOptions=function(e){Object.assign(c,e)},u.resetDefaultOptions=function(){c=Object.assign({},a)},t["a"]=u},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),a=n.n(r),i=n(11),c=n(2),o=n.n(c),s=n(20);function u(){return Object(s["a"])(["user"],Object(i["a"])(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.a.getStorageSync("userInfo"),e.abrupt("return","string"===typeof t?void 0:t);case 2:case"end":return e.stop()}}),e)}))),{initialData:o.a.getStorageSync("userInfo")})}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=Behavior({externalClasses:["hover-class"],properties:{id:String,lang:String,businessId:Number,sessionFrom:String,sendMessageTitle:String,sendMessagePath:String,sendMessageImg:String,showMessageCard:Boolean,appParameter:String,ariaLabel:String}})},31:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=Behavior({properties:{openType:String},methods:{bindGetUserInfo:function(e){this.$emit("getuserinfo",e.detail)},bindContact:function(e){this.$emit("contact",e.detail)},bindGetPhoneNumber:function(e){this.$emit("getphonenumber",e.detail)},bindError:function(e){this.$emit("error",e.detail)},bindLaunchApp:function(e){this.$emit("launchapp",e.detail)},bindOpenSetting:function(e){this.$emit("opensetting",e.detail)}}})},35:function(e,t){e.exports={miniTitle:"NICEUP"}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(6),a=n(2),i=n.n(a),c=n(0),o=n(76),s=n.n(o),u=n(64),l=n.n(u),d=n(65),f=n.n(d);function h(){var e=Object(c["useState"])(i.a.getStorageSync("bag")),t=Object(r["a"])(e,2),n=t[0],a=t[1],o=function(e,t,n){var r=i.a.getStorageSync("bag")||[],c=!0;if(r=f()(r,(function(r){return r.product_id==e._id&&r.spec_id==t._id&&(r.num=n,c=!1),r})),c){var o={product_id:e._id,product_title:e.title,product_thumb:e.thumb,spec_id:t._id,spec_title:t.title,spec_price:t.price,spec_weight:t.weight,spec_three:t.three,num:n};r=s()([o],r)}i.a.setStorage({key:"bag",data:r}),a(r)},u=function(e,t,n){var r=i.a.getStorageSync("bag")||[];r=f()(r,(function(r){return r.product_id==e&&r.spec_id==t&&(r.num=n),r})),i.a.setStorage({key:"bag",data:r}),a(r)},d=function(e,t){var n=i.a.getStorageSync("bag")||[];l()(n,(function(n){return n.product_id==e&&n.spec_id==t})),i.a.setStorage({key:"bag",data:n}),a(n)},h=function(e){var t=i.a.getStorageSync("bag")||[];l()(t,(function(t){return e.indexOf(t.spec_id)>-1})),i.a.setStorage({key:"bag",data:t}),a(t)},p=function(){a(i.a.getStorageSync("bag"))};return[n,{reGetBag:p,addProdct:o,removeProdct:d,removeProdcts:h,updateProdct:u}]}},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=Behavior({properties:{url:String,linkType:{type:String,value:"navigateTo"}},methods:{jumpLink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"url",t=this.data[e];t&&wx[this.data.linkType]({url:t})}}})},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return g}));var r=n(7),a=n.n(r),i=n(11),c=n(34),o=n(20),s=n(2),u=n.n(s),l=u.a.cloud.database(),d=(l.command,6);function f(){return Object(c["c"])(function(){var e=Object(i["a"])(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i["a"])(a.a.mark((function e(n,r){var i,c;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.cloud.callFunction({name:"submit_order",data:t});case 3:i=e.sent,c=i.result,n(c),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function h(e){return Object(o["a"])(["order",e],Object(i["a"])(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.collection("Order").doc(e).get({});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)}))))}function p(e,t){return v.apply(this,arguments)}function v(){return v=Object(i["a"])(a.a.mark((function e(t,n){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.collection("Order").doc(t).update({data:{subscribe:!0}});case 2:n();case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(e,t,n){return Object(o["a"])(["products",e,t],Object(i["a"])(a.a.mark((function r(){var i,c,o;return a.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i={_openid:n},99!=t&&(i["state"]=t),r.next=4,l.collection("Order").field({_profit:!1}).where(i).orderBy("createdAt","desc").skip(e*d).limit(d).get();case 4:return c=r.sent,o=c.data.length==d,r.abrupt("return",{data:c.data,hasMore:o});case 7:case"end":return r.stop()}}),r)}))))}},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6),a=n(0),i=n(2),c=n.n(i),o=n(36);function s(e){var t=e.active,n=e.info,s=Object(o["a"])(),u=Object(r["a"])(s,2),l=u[0],d=u[1].reGetBag;Object(i["useDidShow"])((function(){d()}));var f=l.length>0?l.length:null;void 0!=n&&(f=n>0?n:null);var h=function(e){var t=[{url:"/pages/index/index"},{url:"/pages/bag/bag"},{url:"/pages/profile/profile"}];c.a.switchTab(t[e.detail])};return a["createElement"]("van-tabbar",{active:t,activeColor:"#0e9a9c",onChange:h},a["createElement"]("van-tabbar-item",{icon:"home-o"},"\u9996\u9875"),a["createElement"]("van-tabbar-item",{icon:"shopping-cart-o",info:f},"\u8d2d\u7269\u8f66"),a["createElement"]("van-tabbar-item",{icon:"user-o"},"\u4e2a\u4eba\u4e2d\u5fc3"))}},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(6),a=n(2),i=n.n(a),c=n(0);function o(){var e=Object(c["useState"])(i.a.getStorageSync("psns")),t=Object(r["a"])(e,2),n=t[0],a=t[1],o=function(e){i.a.setStorage({key:"psns",data:e}),a(e)};return{psns:n,addConfirm:o}}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n.n(r),i=n(11),c=n(20),o=n(2),s=n.n(o),u=s.a.cloud.database();function l(e){return Object(c["a"])(["notice",e],Object(i["a"])(a.a.mark((function t(){var n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.collection("Notice").where({_id:e,state:1}).limit(1).get();case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))))}},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(23),a=Behavior({methods:{$emit:function(){this.triggerEvent.apply(this,arguments)},set:function(e,t){return this.setData(e,t),new Promise((function(e){return wx.nextTick(e)}))},getRect:function(e,t){var n=this;return new Promise((function(r){wx.createSelectorQuery().in(n)[t?"selectAll":"select"](e).boundingClientRect((function(e){t&&Array.isArray(e)&&e.length&&r(e),!t&&e&&r(e)})).exec()}))}}}),i={ancestor:{linked:function(e){this.parent=e},unlinked:function(){this.parent=null}},descendant:{linked:function(e){this.children=this.children||[],this.children.push(e)},unlinked:function(e){this.children=(this.children||[]).filter((function(t){return t!==e}))}}};function c(e,t,n){Object.keys(n).forEach((function(r){e[r]&&(t[n[r]]=e[r])}))}function o(e,t,n){var a=n.type,c=n.name,o=n.linked,s=n.unlinked,u=n.linkChanged,l=t.beforeCreate,d=t.destroyed;"descendant"===a&&(e.created=function(){l&&l.bind(this)(),this.children=this.children||[]},e.detached=function(){this.children=[],d&&d.bind(this)()}),e.relations=Object.assign(e.relations||{},Object(r["a"])({},"../".concat(c,"/index"),{type:a,linked:function(e){i[a].linked.bind(this)(e),o&&o.bind(this)(e)},linkChanged:function(e){u&&u.bind(this)(e)},unlinked:function(e){i[a].unlinked.bind(this)(e),s&&s.bind(this)(e)}}))}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};c(e,t,{data:"data",props:"properties",mixins:"behaviors",methods:"methods",beforeCreate:"created",created:"attached",mounted:"ready",relations:"relations",destroyed:"detached",classes:"externalClasses"});var n=e.relation;n&&o(t,e,n),t.externalClasses=t.externalClasses||[],t.externalClasses.push("custom-class"),t.behaviors=t.behaviors||[],t.behaviors.push(a),e.field&&t.behaviors.push("wx://form-field"),t.properties&&Object.keys(t.properties).forEach((function(e){Array.isArray(t.properties[e])&&(t.properties[e]=null)})),t.options={multipleSlots:!0,addGlobalClass:!0},Component(t)}},51:function(e,t,n){e.exports=n.p+"assets/copy.svg"},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(10),a=function(e){return{enter:"van-".concat(e,"-enter van-").concat(e,"-enter-active enter-class enter-active-class"),"enter-to":"van-".concat(e,"-enter-to van-").concat(e,"-enter-active enter-to-class enter-active-class"),leave:"van-".concat(e,"-leave van-").concat(e,"-leave-active leave-class leave-active-class"),"leave-to":"van-".concat(e,"-leave-to van-").concat(e,"-leave-active leave-to-class leave-active-class")}},i=function(e){return Behavior({properties:{customStyle:String,show:{type:Boolean,value:e,observer:"observeShow"},duration:{type:null,value:300,observer:"observeDuration"},name:{type:String,value:"fade"}},data:{type:"",inited:!1,display:!1},methods:{observeShow:function(e,t){e!==t&&(e?this.enter():this.leave())},enter:function(){var e=this,t=this.data,n=t.duration,i=t.name,c=a(i),o=Object(r["f"])(n)?n.enter:n;this.status="enter",this.$emit("before-enter"),Object(r["g"])((function(){e.checkStatus("enter"),e.$emit("enter"),e.setData({inited:!0,display:!0,classes:c.enter,currentDuration:o}),Object(r["g"])((function(){e.checkStatus("enter"),e.transitionEnded=!1,e.setData({classes:c["enter-to"]})}))}))},leave:function(){var e=this;if(this.data.display){var t=this.data,n=t.duration,i=t.name,c=a(i),o=Object(r["f"])(n)?n.leave:n;this.status="leave",this.$emit("before-leave"),Object(r["g"])((function(){e.checkStatus("leave"),e.$emit("leave"),e.setData({classes:c.leave,currentDuration:o}),Object(r["g"])((function(){e.checkStatus("leave"),e.transitionEnded=!1,setTimeout((function(){return e.onTransitionEnd()}),o),e.setData({classes:c["leave-to"]})}))}))}},checkStatus:function(e){if(e!==this.status)throw new Error("incongruent status: ".concat(e))},onTransitionEnd:function(){if(!this.transitionEnded){this.transitionEnded=!0,this.$emit("after-".concat(this.status));var e=this.data,t=e.show,n=e.display;!t&&n&&this.setData({display:!1})}}}})}},62:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return v}));var r=n(7),a=n.n(r),i=n(11),c=n(20),o=n(2),s=n.n(o),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!l.test(e))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");e+="==".slice(2-(3&e.length));for(var t,n,r,a="",i=0;i<e.length;)t=u.indexOf(e.charAt(i++))<<18|u.indexOf(e.charAt(i++))<<12|(n=u.indexOf(e.charAt(i++)))<<6|(r=u.indexOf(e.charAt(i++))),a+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return a};var f=s.a.cloud.database(),h=(f.command,10);function p(e,t){return Object(c["a"])(["products",e,t],Object(i["a"])(a.a.mark((function n(){var r,i,c;return a.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={state:1,verify:!0},"all"!=t&&(r["tags"]={value:t}),n.next=4,f.collection("Product").field({info:!1,kv:!1}).where(r).orderBy("sort","desc").skip(e*h).limit(h).get();case 4:return i=n.sent,c=i.data.length==h,n.abrupt("return",{data:i.data,hasMore:c});case 7:case"end":return n.stop()}}),n)}))))}function v(e){return Object(c["a"])(["products",e],Object(i["a"])(a.a.mark((function t(){var n,r,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.collection("Product").doc(e).get({});case 2:return n=t.sent,t.next=5,f.collection("Spec").where({product_id:e}).orderBy("sort","desc").get();case 5:return r=t.sent,i=n.data,i.info=decodeURIComponent(d(i.info)),i.specs=r.data,t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)}))))}},74:function(e,t,n){e.exports=n.p+"assets/logo.png"}}]);