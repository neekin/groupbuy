(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[107],{245:function(t,e,i){"use strict";i.r(e);var n=i(6),a=i(5),r=10;function s(t,e){return t>e&&t>r?"horizontal":e>t&&e>r?"vertical":""}var l=Behavior({methods:{resetTouchStatus:function(){this.direction="",this.deltaX=0,this.deltaY=0,this.offsetX=0,this.offsetY=0},touchStart:function(t){this.resetTouchStatus();var e=t.touches[0];this.startX=e.clientX,this.startY=e.clientY},touchMove:function(t){var e=t.touches[0];this.deltaX=e.clientX-this.startX,this.deltaY=e.clientY-this.startY,this.offsetX=Math.abs(this.deltaX),this.offsetY=Math.abs(this.deltaY),this.direction=this.direction||s(this.offsetX,this.offsetY)}}}),o=i(10);Object(a["a"])({mixins:[l],classes:["nav-class","tab-class","tab-active-class","line-class"],relation:{name:"tab",type:"descendant",current:"tabs",linked:function(t){t.index=this.children.length-1,this.updateTabs()},unlinked:function(){this.children=this.children.map((function(t,e){return t.index=e,t})),this.updateTabs()}},props:{sticky:Boolean,border:Boolean,swipeable:Boolean,titleActiveColor:String,titleInactiveColor:String,color:String,animated:{type:Boolean,observer:function(){var t=this;this.children.forEach((function(e,i){return e.updateRender(i===t.data.currentIndex,t)}))}},lineWidth:{type:[String,Number],value:40,observer:"setLine"},lineHeight:{type:[String,Number],value:-1},active:{type:[String,Number],value:0,observer:function(t){t!==this.getCurrentName()&&this.setCurrentIndexByName(t)}},type:{type:String,value:"line"},ellipsis:{type:Boolean,value:!0},duration:{type:Number,value:.3},zIndex:{type:Number,value:1},swipeThreshold:{type:Number,value:5,observer:function(t){this.setData({scrollable:this.children.length>t||!this.data.ellipsis})}},offsetTop:{type:Number,value:0},lazyRender:{type:Boolean,value:!0}},data:{tabs:[],lineStyle:"",scrollLeft:0,scrollable:!1,trackStyle:"",currentIndex:0,container:null,skipTransition:!0,lineOffsetLeft:0},mounted:function(){var t=this;wx.nextTick((function(){t.setLine(!0),t.scrollIntoView()}))},methods:{updateContainer:function(){var t=this;this.setData({container:function(){return t.createSelectorQuery().select(".van-tabs")}})},updateTabs:function(){var t=this.children,e=void 0===t?[]:t,i=this.data;this.setData({tabs:e.map((function(t){return t.data})),scrollable:this.children.length>i.swipeThreshold||!i.ellipsis}),this.setCurrentIndexByName(this.getCurrentName()||i.active)},trigger:function(t,e){var i=this.data.currentIndex,n=e||this.children[i];Object(o["e"])(n)&&this.$emit(t,{index:n.index,name:n.getComputedName(),title:n.data.title})},onTap:function(t){var e=this,i=t.currentTarget.dataset.index,n=this.children[i];n.data.disabled?this.trigger("disabled",n):(this.setCurrentIndex(i),wx.nextTick((function(){e.trigger("click")})))},setCurrentIndexByName:function(t){var e=this.children,i=void 0===e?[]:e,n=i.filter((function(e){return e.getComputedName()===t}));n.length&&this.setCurrentIndex(n[0].index)},setCurrentIndex:function(t){var e=this,i=this.data,n=this.children,a=void 0===n?[]:n;if(!(!Object(o["e"])(t)||t>=a.length||t<0)&&(a.forEach((function(i,n){var a=n===t;a===i.data.active&&i.inited||i.updateRender(a,e)})),t!==i.currentIndex)){var r=null!==i.currentIndex;this.setData({currentIndex:t}),wx.nextTick((function(){e.setLine(),e.scrollIntoView(),e.updateContainer(),e.trigger("input"),r&&e.trigger("change")}))}},getCurrentName:function(){var t=this.children[this.data.currentIndex];if(t)return t.getComputedName()},setLine:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("line"===this.data.type){var i=this.data.currentIndex;Promise.all([o["b"].call(this,".van-tab"),o["c"].call(this,".van-tabs__line")]).then((function(a){var r=Object(n["a"])(a,2),s=r[0],l=void 0===s?[]:s,o=r[1],c=l[i];if(null!=c){var h=l.slice(0,i).reduce((function(t,e){return t+e.width}),0);h+=(c.width-o.width)/2,t.setData({lineOffsetLeft:h,skipTransition:e})}}))}},scrollIntoView:function(){var t=this,e=this.data,i=e.currentIndex,a=e.scrollable;a&&Promise.all([o["b"].call(this,".van-tab"),o["c"].call(this,".van-tabs__nav")]).then((function(e){var a=Object(n["a"])(e,2),r=a[0],s=a[1],l=r[i],o=r.slice(0,i).reduce((function(t,e){return t+e.width}),0);t.setData({scrollLeft:o-(s.width-l.width)/2})}))},onTouchScroll:function(t){this.$emit("scroll",t.detail)},onTouchStart:function(t){this.data.swipeable&&this.touchStart(t)},onTouchMove:function(t){this.data.swipeable&&this.touchMove(t)},onTouchEnd:function(){if(this.data.swipeable){var t=this.direction,e=this.deltaX,i=this.offsetX,n=50;if("horizontal"===t&&i>=n){var a=this.getAvaiableTab(e);-1!==a&&this.setCurrentIndex(a)}}},getAvaiableTab:function(t){for(var e=this.data,i=e.tabs,n=e.currentIndex,a=t>0?-1:1,r=a;n+r<i.length&&n+r>=0;r+=a){var s=n+r;if(s>=0&&s<i.length&&i[s]&&!i[s].disabled)return s}return-1}}})}},[[245,0,1,2]]]);